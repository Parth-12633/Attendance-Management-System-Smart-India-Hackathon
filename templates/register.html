{% extends "base.html" %}

{% block title %}Register - AttendanceHub{% endblock %}

{% block content %}
<div class="max-w-md mx-auto bg-white rounded-xl card-shadow p-8">
    <div class="text-center mb-8">
        <i class="fas fa-user-plus text-5xl text-indigo-600 mb-4"></i>
        <h2 class="text-2xl font-bold text-gray-900">Register for AttendanceHub</h2>
        <p class="text-gray-600 mt-2">Choose your registration type</p>
    </div>
    <div class="mb-6">
        <div class="flex rounded-lg bg-gray-100 p-1">
            <button id="student-tab" class="flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors bg-white text-indigo-600 shadow-sm">Student</button>
            <button id="teacher-tab" class="flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors text-gray-500 hover:text-gray-700">Teacher</button>
            <button id="admin-tab" class="flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors text-gray-500 hover:text-gray-700">Admin</button>
        </div>
    </div>
    <!-- Student Registration Form -->
    <form id="student-form" class="space-y-4">
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Full Name</label>
            <input type="text" id="student-name" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" placeholder="Enter your full name" required>
        </div>
        <div class="grid grid-cols-3 gap-3">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Roll No</label>
                <input type="text" id="student-roll" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" placeholder="001" required>
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Division</label>
                <select id="student-division" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" required>
                    <option value="">Select</option>
                    <option value="A">A</option>
                    <option value="B">B</option>
                    <option value="C">C</option>
                </select>
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Standard</label>
                <select id="student-standard" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" required>
                    <option value="">Select</option>
                    <option value="9">9th</option>
                    <option value="10">10th</option>
                    <option value="11">11th</option>
                    <option value="12">12th</option>
                </select>
            </div>
        </div>
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Password</label>
            <input type="password" id="student-password" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" placeholder="Create a password" required>
        </div>
        <div id="face-capture-section" class="mt-4">
            <label class="block text-sm font-medium text-gray-700 mb-1">Face Registration (Required)</label>
            <div class="flex flex-col items-center">
                <video id="face-video" width="240" height="180" autoplay class="rounded-lg border mb-2"></video>
                <div class="flex gap-2 mb-2">
                    <button type="button" id="capture-face-btn" class="bg-indigo-500 text-white px-3 py-1 rounded">Capture Face</button>
                    <button type="button" id="clear-faces-btn" class="bg-gray-400 text-white px-3 py-1 rounded">Clear</button>
                </div>
                <div id="face-thumbnails" class="flex gap-2"></div>
                <p class="text-xs text-gray-500 mt-1">Capture 3-5 clear face images for best accuracy.</p>
            </div>
        </div>
        <button type="submit" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 px-4 rounded-lg transition-colors">
            <i class="fas fa-user-plus mr-2"></i>Register as Student
        </button>
    </form>
    <!-- Teacher Registration Form -->
    <form id="teacher-form" class="space-y-4 hidden">
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Full Name</label>
            <input type="text" id="teacher-name" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" placeholder="Enter your full name" required>
        </div>
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Email Address</label>
            <input type="email" id="teacher-email" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" placeholder="Enter your email" required>
        </div>
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Employee ID</label>
            <input type="text" id="teacher-employee-id" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" placeholder="Employee ID" required>
        </div>
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Department</label>
            <input type="text" id="teacher-department" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" placeholder="Department" required>
        </div>
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Password</label>
            <input type="password" id="teacher-password" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" placeholder="Create a password" required>
        </div>
        <button type="submit" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 px-4 rounded-lg transition-colors">
            <i class="fas fa-user-plus mr-2"></i>Register as Teacher
        </button>
    </form>
    <!-- Admin Registration Form -->
    <form id="admin-form" class="space-y-4 hidden">
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Full Name</label>
            <input type="text" id="admin-name" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" placeholder="Enter your full name" required>
        </div>
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Email Address</label>
            <input type="email" id="admin-email" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" placeholder="Enter your email" required>
        </div>
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Password</label>
            <input type="password" id="admin-password" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" placeholder="Create a password" required>
        </div>
        <button type="submit" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 px-4 rounded-lg transition-colors">
            <i class="fas fa-user-plus mr-2"></i>Register as Admin
        </button>
    </form>
    <div id="register-error" class="mt-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg hidden"></div>
    <div id="register-success" class="mt-4 p-3 bg-green-100 border border-green-400 text-green-700 rounded-lg hidden"></div>
    <div class="mt-6 text-center">
        <span class="text-gray-600">Already have an account?</span>
        <a href="/login" class="ml-2 text-indigo-600 hover:underline font-semibold">Login</a>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/register.js') }}"></script>
{% endblock %}
